import{a as Z,b as K}from"./chunk-5H5PV4OE.js";import{a as E}from"./chunk-GEWLBPS6.js";import{a as V,c as L,d as j,e as z,f as U,g as H,h as R}from"./chunk-R4VHEHPL.js";import{a as T,b as o,d as G,e as O,g as w,h as I,i as A,j as q,k as P,l as B,m as D}from"./chunk-LGM5CEDA.js";import"./chunk-XAZLOLJU.js";import{a as F,b as k}from"./chunk-VELDWVFK.js";import"./chunk-IV7TI2HX.js";import{F as x,H as M,I as N}from"./chunk-DFGM75CN.js";import{Gb as n,Kb as h,Oa as c,aa as p,ca as v,cb as g,fc as _,hb as s,ka as b,la as C,mb as e,nb as t,ob as a,rb as S,ub as u,wb as y}from"./chunk-QXLJQPYW.js";function $(d,i){if(d&1){let r=S();e(0,"div",23)(1,"mat-form-field",3)(2,"mat-label"),n(3,"Tytu\u0142"),t(),a(4,"input",4),t(),e(5,"mat-form-field",3)(6,"mat-label"),n(7,"Opis"),t(),a(8,"textarea",24),t(),e(9,"button",25),u("click",function(){let l=b(r).index,f=y();return C(f.removeTile(l))}),e(10,"mat-icon"),n(11,"delete"),t()()()}if(d&2){let r=i.index;s("formGroupName",r)}}function J(d,i){if(d&1){let r=S();e(0,"div",23)(1,"mat-form-field",3)(2,"mat-label"),n(3,"Warto\u015B\u0107"),t(),a(4,"input",26),t(),e(5,"mat-form-field",3)(6,"mat-label"),n(7,"Etykieta"),t(),a(8,"input",27),t(),e(9,"button",25),u("click",function(){let l=b(r).index,f=y();return C(f.removeStat(l))}),e(10,"mat-icon"),n(11,"delete"),t()()()}if(d&2){let r=i.index;s("formGroupName",r)}}var W=class d{fb=p(B);contentService=p(E);snackBar=p(H);form=this.fb.nonNullable.group({hero:this.fb.nonNullable.group({title:["",o.required],subtitle:["",o.required],primaryCtaLabel:["",o.required],secondaryCtaLabel:["",o.required],imageUrl:["",o.required]}),about:this.fb.nonNullable.group({title:["",o.required],intro:["",o.required]}),tiles:this.fb.array([]),stats:this.fb.array([]),contact:this.fb.nonNullable.group({email:["",[o.required,o.email]],phone:["",o.required],location:["",o.required]})});subscription=this.contentService.content$.subscribe(i=>this.patchForm(i));get tiles(){return this.form.controls.tiles}get stats(){return this.form.controls.stats}addTile(){this.tiles.push(this.buildTileGroup())}removeTile(i){this.tiles.removeAt(i)}addStat(){this.stats.push(this.buildStatGroup())}removeStat(i){this.stats.removeAt(i)}submit(){if(this.form.invalid){this.form.markAllAsTouched();return}let i=this.form.getRawValue();this.contentService.updateContent({hero:i.hero,about:i.about,tiles:i.tiles,stats:i.stats,contact:i.contact}),this.snackBar.open("Zapisano",void 0,{duration:2500})}reset(){this.contentService.resetContent(),this.snackBar.open("Przywr\xF3cono domy\u015Blne tre\u015Bci",void 0,{duration:2500})}ngOnDestroy(){this.subscription.unsubscribe()}patchForm(i){this.form.patchValue({hero:i.hero,about:i.about,contact:i.contact}),this.setArray(this.tiles,i.tiles,r=>this.buildTileGroup(r)),this.setArray(this.stats,i.stats,r=>this.buildStatGroup(r))}setArray(i,r,m){i.clear(),r.forEach(l=>i.push(m(l)))}buildTileGroup(i){return this.fb.nonNullable.group({title:[i?.title??"",o.required],description:[i?.description??"",o.required]})}buildStatGroup(i){return this.fb.nonNullable.group({value:[i?.value??"",o.required],label:[i?.label??"",o.required]})}static \u0275fac=function(r){return new(r||d)};static \u0275cmp=v({type:d,selectors:[["app-content-editor"]],standalone:!0,features:[h],decls:79,vars:3,consts:[[1,"content-editor"],[1,"editor-grid",3,"ngSubmit","formGroup"],["formGroupName","hero",1,"field-grid"],["appearance","fill"],["matInput","","formControlName","title"],["matInput","","rows","3","formControlName","subtitle"],["matInput","","formControlName","primaryCtaLabel"],["matInput","","formControlName","secondaryCtaLabel"],["matInput","","formControlName","imageUrl"],["formGroupName","about",1,"field-grid"],["matInput","","rows","3","formControlName","intro"],[1,"card-header"],["mat-stroked-button","","type","button",3,"click"],["formArrayName","tiles",1,"dynamic-grid"],["class","dynamic-item",3,"formGroupName",4,"ngFor","ngForOf"],["formArrayName","stats",1,"dynamic-grid"],["formGroupName","contact",1,"field-grid"],["matInput","","formControlName","email"],["matInput","","formControlName","phone"],["matInput","","formControlName","location"],[1,"form-actions"],["mat-flat-button","","type","submit",1,"pill-button","pill-button--primary"],["mat-stroked-button","","type","button",1,"pill-button","pill-button--secondary",3,"click"],[1,"dynamic-item",3,"formGroupName"],["matInput","","rows","2","formControlName","description"],["mat-icon-button","","type","button","aria-label","Usu\u0144",3,"click"],["matInput","","formControlName","value"],["matInput","","formControlName","label"]],template:function(r,m){r&1&&(e(0,"section",0)(1,"form",1),u("ngSubmit",function(){return m.submit()}),e(2,"mat-card")(3,"h2"),n(4,"Sekcja Hero"),t(),e(5,"div",2)(6,"mat-form-field",3)(7,"mat-label"),n(8,"Tytu\u0142"),t(),a(9,"input",4),t(),e(10,"mat-form-field",3)(11,"mat-label"),n(12,"Lead"),t(),a(13,"textarea",5),t(),e(14,"mat-form-field",3)(15,"mat-label"),n(16,"Primary CTA"),t(),a(17,"input",6),t(),e(18,"mat-form-field",3)(19,"mat-label"),n(20,"Secondary CTA"),t(),a(21,"input",7),t(),e(22,"mat-form-field",3)(23,"mat-label"),n(24,"URL obrazka"),t(),a(25,"input",8),t()()(),e(26,"mat-card")(27,"h2"),n(28,"Opis dzia\u0142alno\u015Bci"),t(),e(29,"div",9)(30,"mat-form-field",3)(31,"mat-label"),n(32,"Nag\u0142\xF3wek"),t(),a(33,"input",4),t(),e(34,"mat-form-field",3)(35,"mat-label"),n(36,"Opis"),t(),a(37,"textarea",10),t()()(),e(38,"mat-card")(39,"div",11)(40,"h2"),n(41,"Kafle us\u0142ug"),t(),e(42,"button",12),u("click",function(){return m.addTile()}),e(43,"mat-icon"),n(44,"add"),t(),n(45," Dodaj kafel "),t()(),e(46,"div",13),g(47,$,12,1,"div",14),t()(),e(48,"mat-card")(49,"div",11)(50,"h2"),n(51,"Statystyki"),t(),e(52,"button",12),u("click",function(){return m.addStat()}),e(53,"mat-icon"),n(54,"add"),t(),n(55," Dodaj statystyk\u0119 "),t()(),e(56,"div",15),g(57,J,12,1,"div",14),t()(),e(58,"mat-card")(59,"h2"),n(60,"Dane kontaktowe"),t(),e(61,"div",16)(62,"mat-form-field",3)(63,"mat-label"),n(64,"E-mail"),t(),a(65,"input",17),t(),e(66,"mat-form-field",3)(67,"mat-label"),n(68,"Telefon"),t(),a(69,"input",18),t(),e(70,"mat-form-field",3)(71,"mat-label"),n(72,"Lokalizacja"),t(),a(73,"input",19),t()()(),e(74,"div",20)(75,"button",21),n(76," Zapisz "),t(),e(77,"button",22),u("click",function(){return m.reset()}),n(78," Przywr\xF3\u0107 domy\u015Blne "),t()()()()),r&2&&(c(),s("formGroup",m.form),c(46),s("ngForOf",m.tiles.controls),c(10),s("ngForOf",m.stats.controls))},dependencies:[D,w,T,G,O,I,P,A,q,k,F,j,L,V,U,z,N,x,M,K,Z,R,_],styles:[".content-editor[_ngcontent-%COMP%]{padding:4rem 1rem}.editor-grid[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2rem}mat-card[_ngcontent-%COMP%]{background:var(--color-card);border:1px solid var(--color-border);padding:2rem}h2[_ngcontent-%COMP%]{margin-top:0;letter-spacing:.08em}.field-grid[_ngcontent-%COMP%]{display:grid;gap:1rem}.card-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;gap:1rem;margin-bottom:1rem}.dynamic-grid[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}.dynamic-item[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,minmax(0,1fr)) auto;gap:1rem;align-items:center}.form-actions[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:1rem}@media (max-width: 900px){.dynamic-item[_ngcontent-%COMP%]{grid-template-columns:1fr}.card-header[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start}}"]})};export{W as ContentEditorComponent};
